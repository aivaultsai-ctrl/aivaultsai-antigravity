# Automation Blueprints
**Generated by:** AGENT 2 (Automation Engineer)
**Target Platform:** Make.com

## Blueprint 1: The "Lead-to-Cash" Pipeline
**Goal:** Automate the journey from website signup to activated subscription.
**Trigger:** Stripe Webhook (`checkout.session.completed`)

### Steps:
1.  **Webhook (Stripe)**: Receives payload with `customer_email`, `amount_total`, `metadata.userId`.
2.  **Firestore (Update)**:
    *   Collection: `users`
    *   ID: `metadata.userId`
    *   Update: `subscriptionStatus: "active"`, `credits: 500`.
3.  **Gmail (Send Email)**:
    *   To: `customer_email`
    *   Subject: "Welcome to AIVaults! Your AI Staff is Ready."
    *   Body: "Login now at https://aivaultsai.one/dashboard to assign tasks."
4.  **Slack (Notify Team)**:
    *   Channel: `#sales-wins`
    *   Message: "ðŸ’° New Customer! $49/mo subscription activated."

## Blueprint 2: The "Content Recycling" Engine
**Goal:** Turn 1 YouTube video into 5 Tweets and 1 LinkedIn post.
**Trigger:** New row in Google Sheet (Video URL)

### Steps:
1.  **Google Sheets (Watch Rows)**: Detects new URL in "Input" tab.
2.  **HTTP Request (AIVaults API)**:
    *   URL: `https://aivaultsai.one/api/ai/chat` (or internal worker)
    *   Payload: `{ prompt: "Summarize this video <URL> into 5 viral tweets...", tools: ["youtube_transcript"] }`
3.  **OpenAI / Gemini (Process)**: Generates the content.
4.  **Google Sheets (Update Row)**:
    *   Writes "Tweet 1", "Tweet 2", "LinkedIn Post" into respective columns.
5.  **Buffer (Create Post)**:
    *   Drafts the LinkedIn post automatically.

**Implementation Note:**
These blueprints rely on the `api/stripe/webhook` we built earlier and a new `api/workers/content` endpoint we need to prioritize.
